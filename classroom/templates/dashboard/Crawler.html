{% extends 'dashboard/base.html' %}
{% load static %}
{% block body %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crawl Website</title>
    <style>
    /* Style for centering the form and table */
    .center {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column; /* Align items vertically */
        height: 100vh; /* Adjust as needed */
    }

    /* Style for the form container */
    .form-container {
        background-color: #ffffff;
        padding: 20px;
        border-radius: 10px;
        max-width: 600px; /* Adjust as needed */
        margin-bottom: 10px; /* Add space between form and table */
    }

    /* Style for form input fields */
    input[type="text"] {
        width: 100%; /* Full width */
        padding: 10px;
        margin: 8px 0;
        border: 1px solid #754444;
        border-radius: 4px;
        box-sizing: border-box;
    }

    /* Style for the Crawl button */
    button[type="submit"] {
        background-color: #4CAF50; /* Dark green */
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 2px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 8px; /* Add margin at the top */
    }

    /* Style for the Crawl button on hover */
    button[type="submit"]:hover {
        background-color: #45a049; /* Light green */
    }

    /* Style for the table */
    table {
        width: 100%; /* Make the table span the full width */
        border-collapse: collapse;
    }

    /* Style for table header */
    th {
        background-color: #f2f2f2;
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    /* Style for table data */
    td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
</style>

</head>
<body>
    <div id="content" class="p-8 p-md-5 pt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="#">Crawl the Website</a>
                            </li>
                        </ol>
                    </nav>
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-10">
                                    <div class>
                                        <div class="form-container">
                                            <form method="post">
                                                {% csrf_token %}
                                                <input type="text" name="website_url" placeholder="Enter Keyword...">
                                                <button type="submit">Crawl</button>
                                            </form>
                                            {% if message %}
                                            <p>{{ message }}</p>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card mb-3">
        <div class="card-body">
            <div class="col-md-10 col-sm-4 col-xs-4">
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Model Name</th>
                                <th>Firmware Version</th>
                                <th>Source URL</th>
                                <th>Download Link</th>
                                <th>Tenda Download Link</th>
                                <th>Action</th>  <!-- Add a new column for action buttons -->
                            </tr>
                        </thead>
                        <tbody>
                            {% for data in scraped_data %}
                            <tr>
                                <td>{{ data.model_name }}</td>
                                <td>{{ data.firmware_version }}</td>
                                <td><a href="{{ data.source_url }}">{{ data.source_url }}</a></td>
                                <td><a href="{{ data.download_link }}">{{data.download_link}}</a></td>
                                <td><a href="{{ data.tenda_download_link }}">{{data.tenda_download_link}}</a></td>
                                <td>
                                <form action="{% url 'delete_all_scraped_data' %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit">Delete All Scraped Data</button>
                                </form>
                            </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    
                </div>
            </div>
        </div>
    </div>
</body>
</html>
{% endblock %}
